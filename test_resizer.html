<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        #bigBox
        {
            display: grid;
            /* justify-content: center;             */
            align-items: end;
            margin-top: 5rem;
            height: 50vh;
            border: 1px solid #000;
        }
        #boxImg
        {
            height: 5vh;
            width: 5vh;
            margin: auto auto 0;
            /* border: 1px solid #000; */
            background-color: blueviolet;
        }
        #boxBtn 
        {
            text-align: center;
        }

        [id^="btn"]
        {
            padding: .5rem;
            user-select: none;
            color: rgb(214, 214, 214);
            background-color: rgb(78, 77, 77);
        }

        [id^="btn"]:hover
        {
            cursor: pointer;
        }
        
        #boxBtn
        {
            padding: 1rem;
            user-select: none;
            /* border: 1px solid #000; */
        }


    </style>
    <script src="https://kit.fontawesome.com/d036c570ce.js" crossorigin="anonymous"></script>
    <title>Resizer</title>
</head>
<body>
    <div id="bigBox">
        <div id="boxImg"></div>
    </div>
    <div id="boxBtn">
        <span id="btnDecrease">-</span>
        <span id="btnIncrease">+</span>
        <span id="btnLeft"><i class="fa-solid fa-arrow-left-long"></i></span>
        <span id="btnRight"><i class="fa-solid fa-arrow-right-long"></i></span>
    </div>

    <script>        
        const bigBox = document.querySelector(`#bigBox`);
        const boxImg = document.querySelector(`#boxImg`);
        const btnDecrease = document.querySelector(`#btnDecrease`);
        const btnIncrease = document.querySelector(`#btnIncrease`);  
        let bigBoxRect;
        let boxImgRect;  

        let constantDecrease;     
        let constantIncrease;    
        let constantMoveLeft; 
        let constantMoveRight; 
        // let width = boxImg.clientWidth;
        // let height = boxImg.clientHeight;
        let width = 5;
        let height = 5;
        let positionX = boxImg.clientLeft;
      

        /***********************************************************************
         * *************************** GET BOUNDING RECT ***********************
         * *********************************************************************         * 
         */
        const getRect = (element) =>
        {
            let rect = element.getBoundingClientRect();
            return rect;
        }

        /***********************************************************************
         ************************** checkBorders *******************************
         * check if borders are reached and return true if        
         */
        const checkLeft = () =>
        {
            if(getRect(boxImg).x >= getRect(bigBox).x+5)
                return true;
            else
                return false;                                              
        }
        
        const checkRight = () =>
        {
            if(getRect(boxImg).right <= getRect(bigBox).right-5)
            return true;
            else
            return false;
        }
        
        const checkTop = () =>
        {
            if(getRect(boxImg).y <= getRect(bigBox).x-5)
                return true;
            else
                return false;                                              
        }
        
        
        /*
        ***********************************************************************
        ******************************* DECREASE FUNCTION *********************
        ***********************************************************************
        */
        const decrease = () =>{
            if(width >= 1)
            {
                width -= 5;             
                boxImg.style.width = `${width}%`;                
            }
            if(height >= 1)
            {
                height -= 5;                
                boxImg.style.height = `${height}%`;            
            }           
        }
        btnDecrease.addEventListener('mousedown', () =>
            {
                constantDecrease = setInterval(decrease, 100);
            }
        );
        btnDecrease.addEventListener('mouseup', () =>
            {
                clearInterval(constantDecrease);                
            }
        );
        btnDecrease.addEventListener('mouseout', () =>
            {
                if(constantDecrease )
                    clearInterval(constantDecrease);                
            }
        );
        
        
        /*
        ***********************************************************************
        ******************************* INCREASE FUNCTION *********************
        ***********************************************************************
        */
        const increase = () =>{
            if(width <= 95)
            {
                width += 5;
                boxImg.style.width = `${width}%`;                
            }
            if(height <= 95)
            {
                height += 5;
                boxImg.style.height = `${height}%`;
            }           
        }
        btnIncrease.addEventListener('mousedown', () =>
            {
                constantIncrease = setInterval(increase, 100);
            }
        );
        btnIncrease.addEventListener('mouseup', () =>
            {
                clearInterval(constantIncrease);           
            }
        );
        btnIncrease.addEventListener('mouseout', () =>
            {
                clearInterval(constantIncrease);           
            }
        );
        

        /*
        **********************************************************************************
        ******************************* MOVELEFT FUNCTION ********************************
        **********************************************************************************
        */
        const moveLeft = () =>
        {
            // console.log(`${getRect(bigBox).x} --------- ${getRect(boxImg).x}`);                
            if(checkLeft(boxImg))
            {                
                positionX -= 5;            
                boxImg.style.transform = `translateX(${positionX}px)`;                       
            }
            console.log(checkLeft());
        }

        btnLeft.addEventListener('mousedown', () =>
            {
                    constantMoveLeft = setInterval(moveLeft, 100);
                // getBoundingClientRect() give informations posX, posY, width and height;
                
                
            }
        );

        btnLeft.addEventListener('mouseup', () =>
            {
                clearInterval(constantMoveLeft);                
            }
        );

        btnLeft.addEventListener('mouseout', () =>
            {
                clearInterval(constantMoveLeft);                
            }
        );


        /*
        ************************************************************************************
        ******************************* MOVERIGHT FUNCTION *********************************
        ************************************************************************************
        */
        const moveRight = () =>
        {
            // console.log(`${getRect(bigBox).right} --------- ${getRect(boxImg).right}`);   
            if(getRect(boxImg).right <= getRect(bigBox).right-5)
            {
                positionX += 5;            
                boxImg.style.transform = `translateX(${positionX}px)`;                      
            }
        }

        btnRight.addEventListener('mousedown', () =>
            {
                constantMoveRight = setInterval(moveRight, 100);
            }
        );

        btnRight.addEventListener('mouseup', () =>
            {
                clearInterval(constantMoveRight);                
            }
        );

        btnRight.addEventListener('mouseout', () =>
            {
                clearInterval(constantMoveRight);                
            }
        );
        
        </script>
</body>
</html>